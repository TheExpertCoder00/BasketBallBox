<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basketball Box</title>
  <link rel="stylesheet" href="style.css" />
</head>

<div id="loadingScreen" style="
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: black;
  color: white;
  font-size: 2em;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
">
  Waiting for opponent...
</div>
<body>
    <div class="lobby-header">
      <h2 style="margin:0">üèÄ BasketballBox ‚Äî Join a Room</h2>
      <!-- coins.js updates this automatically -->
      <div id="bbxCoinsBadge" class="coins-badge">‚õÅ ‚Äî</div>
    </div>
    <div id="lobby" style="
      position:fixed; inset:0; background:#0b0b0ee6; color:white; z-index:10000;
      display:flex; align-items:center; justify-content:center; font-family:Arial;">
      <div style="width:min(720px, 92%);">
        <div class="lobby-header">
          <h2 style="margin:0 0 12px">üèÄ BasketballBox ‚Äî Join a Room</h2>
          <div id="bbxCoinsBadge" class="coins-badge">‚õÅ ‚Äî</div>
        </div>
        <!-- Mode selector -->
        <div class="toolbar">
          <span class="label">Mode:</span>
          <div class="segmented">
            <button id="modeCasual" class="seg-btn is-active">Casual</button>
            <button id="modeCompetitive" class="seg-btn">Competitive</button>
          </div>
          <span id="modeTip" class="hint"></span>
        </div>

        <!-- Tabs -->
        <div class="segmented" style="margin: 10px 0 8px 0;">
          <button id="tabPublic" class="seg-btn is-active">Public</button>
          <button id="tabPrivate" class="seg-btn">Private</button>
        </div>

        <div id="roomList" style="background:#111; border-radius:12px; padding:12px; max-height:40vh; overflow:auto; margin-bottom:12px;">
          <div id="publicRooms"></div>
          <div id="privateRooms" style="display:none"></div>
        </div>
        <!-- Create -->
        <div class="create-row">
          <input id="newRoomName" class="input" placeholder="Room name">
          <label class="check">
            <input type="checkbox" id="isPrivateChk"> <span>Private</span>
          </label>
          <input id="roomPassword" class="input" placeholder="Password" style="display:none;">
          <!-- Play to -->
          <div class="toolbar" style="margin: 8px 0 10px 0;">
            <span class="label">Play to:</span>
            <div class="segmented" id="toWinGroup">
              <button class="seg-btn" data-to="5">5</button>
              <button class="seg-btn" data-to="7">7</button>
              <button class="seg-btn is-active" data-to="11">11</button>
              <button class="seg-btn" data-to="21">21</button>
            </div>
          </div>
          <button id="createRoomBtn" class="btn btn-primary">Create & Join</button>
        </div>

      </div>
      <!-- Password Modal -->
      <div id="pwModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.6);
        align-items:center; justify-content:center;">
        <div style="background:#111; border:1px solid #222; border-radius:12px; padding:16px; width:min(420px, 92%); color:#fff;">
          <div style="font-weight:700; margin-bottom:8px;">Join Private Room</div>
          <div id="pwRoomName" style="opacity:.8; margin-bottom:12px;"></div>
          <input id="pwInput" type="password" placeholder="Password" style="width:100%; padding:10px; border:0; border-radius:8px; margin-bottom:10px;">
          <div id="pwError" style="color:#ff6b6b; min-height:18px; margin-bottom:8px;"></div>
          <div style="display:flex; gap:8px; justify-content:flex-end;">
            <button id="pwCancel" style="padding:8px 12px; border-radius:8px; border:0; background:#222; color:#ddd; cursor:pointer;">Cancel</button>
            <button id="pwJoin"   style="padding:8px 12px; border-radius:8px; border:0; background:#3a86ff; color:#fff; cursor:pointer;">Join</button>
          </div>
        </div>
      </div> 
    </div>
    <!-- Game Over Modal -->
    <div id="gameOverModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.6);
      align-items:center; justify-content:center; z-index:10001;">
      <div style="background:#111; border:1px solid #222; border-radius:12px; padding:16px; width:min(420px, 92%); color:#fff; text-align:center;">
        <div id="gameOverTitle" style="font-size:22px; font-weight:800; margin-bottom:8px;">You Won!</div>
        <div id="gameOverSub" style="opacity:.9; margin-bottom:14px;">Final score 11‚Äì7</div>
        <button id="gameOverBack" style="padding:10px 14px; border-radius:10px; border:0; background:#3a86ff; color:#fff; cursor:pointer;">
          Back to lobby
        </button>
      </div>
    </div>
    <div id="scoreboard">
    You: <span id="myScore">0</span> &nbsp;&nbsp; Opponent: <span id="theirScore">0</span>
    </div>
    <!-- Load Firebase compat SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <!-- Load your scripts -->
    <script src="auth.js"></script>
    <script src="coins.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>